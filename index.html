<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hierarchical Project Tracker with Notes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1, h2 {
      text-align: center;
    }
    .project {
      margin: 30px auto;
      width: 80%;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
    }
    .task-input-section {
      text-align: center;
      margin: 10px 0;
    }
    input[type="text"] {
      width: 30%;
      padding: 5px;
      margin-right: 10px;
    }
    button {
      padding: 5px 10px;
      margin: 2px;
      cursor: pointer;
    }
    ul {
      list-style-type: none;
      padding-left: 0;
    }
    li {
      margin: 10px 0;
    }
    .status-legend {
      text-align: center;
      margin: 20px 0;
    }
    .status-legend span {
      margin: 0 10px;
    }
    #materials {
      width: 80%;
      margin: 40px auto;
      border-top: 2px solid #ccc;
      padding-top: 20px;
    }
    .note {
      display: block;
      margin-top: 5px;
      font-size: 0.95em;
      color: #333;
    }
    .note-input {
      width: 60%;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <h1>My Project Tracker with Notes</h1>

  <div class="status-legend">
    Status:
    <span>‚úÖ - completed</span>
    <span>üü† - in progress</span>
    <span>‚ùå - scheduled</span>
  </div>

  <!-- Projects container -->
  <div id="projects"></div>

  <!-- Relevant Materials Section -->
  <div id="materials">
    <h2>Relevant Materials</h2>
    <ul>
      <li><a href="https://example.com/paper1" target="_blank">Paper 1: Deep Learning for Eye Landmarks</a></li>
      <li><a href="https://example.com/dataset" target="_blank">Dataset: Eye Landmark Dataset</a></li>
      <li><a href="https://example.com/tutorial" target="_blank">Tutorial: Flask Deployment</a></li>
    </ul>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const projectsContainer = document.getElementById("projects");

      let data = JSON.parse(localStorage.getItem("projectData")) || {
        "Literature Review": [],
        "Baseline Inplementation": [],
        "Custom Dataset Preparation": [],
        "Final Model Training & Evaluation": [],
        "Method Improvement": []
      };

      function saveData() {
        localStorage.setItem("projectData", JSON.stringify(data));
      }

      function render() {
        projectsContainer.innerHTML = "";
        for (let project in data) {
          const projectDiv = document.createElement("div");
          projectDiv.className = "project";

          const h2 = document.createElement("h2");
          h2.textContent = project;
          projectDiv.appendChild(h2);

          const inputSection = document.createElement("div");
          inputSection.className = "task-input-section";
          inputSection.innerHTML = `
            <input type="text" id="input-${project}" placeholder="Add task to ${project}">
            <input type="text" id="note-${project}" placeholder="Add note (optional)">
            <button onclick="addTask('${project}')">Add Task</button>
          `;
          projectDiv.appendChild(inputSection);

          const ul = document.createElement("ul");
          data[project].forEach((task, index) => {
            const li = document.createElement("li");
            li.innerHTML = `
              ${statusSymbol(task.status)} <strong>${task.name}</strong>
              <span class="note">Note: ${task.note || ''}</span>
              <input type="text" class="note-input" placeholder="Edit note" onchange="editNote('${project}', ${index}, this.value)">
              <br>
              <button onclick="deleteTask('${project}', ${index})">Delete</button>
              <button onclick="updateStatus('${project}', ${index})">Update Status</button>
            `;
            ul.appendChild(li);
          });

          projectDiv.appendChild(ul);
          projectsContainer.appendChild(projectDiv);
        }
      }

      function statusSymbol(status) {
        switch (status) {
          case "completed": return "‚úÖ";
          case "in progress": return "üü†";
          case "scheduled": return "‚ùå";
          default: return "";
        }
      }

      window.addTask = function(project) {
        const taskInput = document.getElementById(`input-${project}`);
        const noteInput = document.getElementById(`note-${project}`);
        const taskName = taskInput.value.trim();
        const note = noteInput.value.trim();

        if (taskName) {
          data[project].push({ name: taskName, status: "scheduled", note: note });
          taskInput.value = "";
          noteInput.value = "";
          saveData();
          render();
        }
      }

      window.deleteTask = function(project, index) {
        data[project].splice(index, 1);
        saveData();
        render();
      }

      window.updateStatus = function(project, index) {
        const statuses = ["scheduled", "in progress", "completed"];
        const currentIndex = statuses.indexOf(data[project][index].status);
        const nextIndex = (currentIndex + 1) % statuses.length;
        data[project][index].status = statuses[nextIndex];
        saveData();
        render();
      }

      window.editNote = function(project, index, newNote) {
        data[project][index].note = newNote;
        saveData();
      }

      render();
    });
  </script>
</body>
</html>
